<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<style>
    body{
        background-image: url("bground.jpg");
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;

    }
    p.padding {
        padding-top: 25px;
        padding-right: 50px;
        padding-bottom: 25px;
        padding-left: 50px;
    }

    input.cen
    {
        text-align:center;
    }

</style>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
        .host{

            display:none;
        }
        .port{

            display:none;
        }
        .hostrange{

            display:none;
        }
.tablee2{

            display:none;
        }

    </style>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
        .host{

            display:none;
        }
        .port{

            display:none;
        }
        .hostrange{

            display:none;
        }

    </style>


    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
	function myFunctSub(ip) {

           // var range = document.forms["form1"]["text2"].value;
            
            var ip = ip.split(".");
		var sub=ip[3].split("/");
             
            if (ip.length != 4) {
                alert("You have entered an invalid IP address!");
                return false;
            }

            //Check Numbers
            for (var c = 0; c < 3; c++) {
                //Perform Test
                if (ip[c] <= -1 || ip[c] > 255 ||
                        isNaN(parseFloat(ip[c])) || !isFinite(ip[c]) ||
                        ip[c].indexOf(" ") !== -1) {
                    alert("You have entered an invalid IP address!");
                    return false;
                }
            }
		
		if (sub[0] <= -1 || sub[0] > 255 ||
                        isNaN(parseFloat(ip[0])) || !isFinite(ip[0]) ||
                        ip[c].indexOf(" ") !== -1) {
                    alert("You have entered an invalid IP address!");
                    return false;}
		if(!sub)
			return true;
		if(sub[1]<0||sub[1]>32)
		{
                    alert("You have entered an invalid IP address!");
                    return false;}
           
            return true;
        }


	function myFunct(ip) {
		if(ip.indexOf('/') == -1)
		{
 			document.forms["form1"]["Multi-Host"].value="false"; 
			document.forms["form1"]["subnet"].value="0";
		}
		else
		{
			document.forms["form1"]["Multi-Host"].value="true";
			var sub=ip.split("/");
			document.forms["form1"]["subnet"].value=sub[1];
			document.forms["form1"]["IP"].value=sub[0];
			return myFunctSub(ip);
		}

            var ip = ip.split(".");
            // alert(ip);

            if (ip.length != 4) {
                alert("You have entered an invalid IP address!");
                return false;
            }

            //Check Numbers
            for (var c = 0; c < 4; c++) {
                //Perform Test
                if (ip[c] <= -1 || ip[c] > 255 ||
                        isNaN(parseFloat(ip[c])) || !isFinite(ip[c]) ||
                        ip[c].indexOf(" ") !== -1) {
                    alert("You have entered an invalid IP address!");
                    return false;
                }
            }
           /* if(document.getElementById('hostr').checked) {
                if ((range > 1024) || (range < 1)) {

                    alert("Enter valid range between 1-1024");
                    return false;
                }
            }*/
            //alert("true");
            return true;
        }
	

        function myFunction(ip) {
//alert("HERE!");
            //var range=document.forms["form2"]["text2"].value;
            //alert(range);
		var start=-1;var end=-1;
		 start=document.forms["form2"]["start"].value;
		 end=document.forms["form2"]["end"].value;
            var ip = ip.split(".");
           // alert(ip);

            if (ip.length != 4) {
                alert("You have entered an invalid IP address!");
                return false;
            }

            //Check Numbers
            for (var c = 0; c < 4; c++) {
                //Perform Test
                if ( ip[c] <= -1 || ip[c] > 255 ||
                        isNaN(parseFloat(ip[c])) ||
                        !isFinite(ip[c])  ||
                        ip[c].indexOf(" ") !== -1 ) {
                    alert("You have entered an invalid IP address!");
                    return false;
                }
            }
            if((start>end)||(start<1)||(end>65536))
            {

                alert("Please enter range between 1-65536");
                return false;
            }
            //alert("true");
           return true;

        }





       

        $(document).ready(function(){

            $("#hostdiv").click(function(){
                $(".host").show();
                $(".port").hide();


            });

            $("#portdiv").click(function(){
                $(".port").show();
                $(".host").hide();
            });

           /* $("#hostr").click(function(){
                $(this).child.show();
            });*/

            $("#hostr").click(function(){

                $(".hostrange").show();

            });
		 $("#Result").click(function(){
                $(".tablee2").show();
                $(".port").hide();
		$(".host").hide();
		$(".init").hide();

            });


//        });


/*First Table created*/
//$(document).ready(function(){



    $("#Result").click(function(){

        $.post("/results",
        {
          name: $("#tp").val(),
          city: "Duckburg"
        },
        function(data,status){
          //  var arr = $.parseJSON(data)
    var out = " <h1 align='center'>RESULT</h1><table border='2' align='center'> ";

    var i;
    //alert("tanvi");
    var val;
    val="";
    out += "<tr><td align='center'><b>" +"IP" +"</b></td><td align='center'><b>" +"Type of Scanning Code" +"</b></td><td align='center'><b>" +"Time Stamp" +"</b></td><td align='center'><b>" +"Status" +"</b></td><td align='center'><b>" +"Select" +"</b></td></tr>";
    for(i=0;i < Object.keys(data).length; i++)
    {
   strs = data[i].TIME;
   strs = strs.split(" ");
   val = data[i].IP+","+data[i].TYPE+","+strs[0]+","+strs[1]+","+data[i].ALIVE+","+data[i].LENGTH;
        //alert(val);
    	
    	if (data[i].TYPE == "1")
    		type= "Single Host Scan";
    	if (data[i].TYPE == "2")
    		type= "Multi-Host Scan";
    	if (data[i].TYPE == "3")
    		type= "Port-Scan";
    	out += "<tr><td align='center'>" +
       	     data[i].IP +
        	    "</td><td align='center'>" +
        	    type +
    		  "</td><td align='center'>" +
              data[i].TIME +
        "</td><td>"
        if(data[i].ALIVE == "1")
               alive  =  " Host is alive "
        else if (data[i].ALIVE == "0")
               alive  =  "Host is down"
        else if(data[i].TYPE == "1") 
               alive = " Waiting for the results `"
        else   
          alive    = " Select more results "
        out += alive +
        "</td><td align='center'>" +

        "<input type='radio' name='val' value="+val+" id='val'>"+ "</td></tr>";
     
     
     
    }
    
        out=out+"</table>";
	out=out+"";



        var dvTable = document.getElementById("dvTable");
        dvTable.innerHTML = out;
        

        });
    });


    


   // dvTable.appendChild(out);
//});
//$(document).ready(function(){
    $("#table32").click(function()
   {
	//alert("here");   
     var _result = "Empty";
    
    
        var o_radio_group = document.getElementsByName("val");
        for (var a = 0; a < o_radio_group.length; a++) 
        {
            if (o_radio_group[a].checked) 
            {

                _result = o_radio_group[a].value;
                break;
            }
         }
      
        $.post("/result2",
        {
          name: _result,
          city: "Duckburg"
        },
        function(data,status){
          //  var arr = $.parseJSON(data)
            var out=" ";

            var i;
            var out = "<html><body><table border='1'>";
        
	    
            if(data[0].SCAN == '0') 
             {  
               document.write("Scanning in Progress. Go Back to view results");
               return; 
             } 
            if(data[0].TYPE == '3')
            {
                   
out+= "<tr><td>" +"IP" +"</td><td>" +"Port" +"</td><td>" +"Open" +"</td></tr>";

                for(i=0;i < Object.keys(data).length; i++)
                {
                
                    if(data[i].OPEN=="1")                    
                        data[i].OPEN = "Yes";                    
                   else if(data[i].OPEN == "0")
                        data[i].OPEN = "No" 
                   else data[i].OPEN = " Host Down "

                out += "<tr><td>" +
                        data[i].IP +
                         "</td><td>" +
                          data[i].PORT +
                    "</td><td>"+
                    data[i].OPEN +
                    "</td></tr>";
                    //out=out+employees[i].firstName + " " + employees[i].lastName+" ";

                }
                
                out=out+"</table></body></html>";

                document.write(out);
            }
            else
            {
            out += "<tr><td>" +"IP" +"</td><td>" +"Alive"+"</td></tr>";
     
                for(i=0;i < Object.keys(data).length; i++)
                {
                
                out += "<tr><td>" +
                        data[i].IP +
                         "</td><td>" 
                if(data[i].ALIVE == "1") 
                    data[i].ALIVE = "Yes"
                else data[i].ALIVE = "No"

                 out += data[i].ALIVE +
                    "</td></tr>";
                    //out=out+employees[i].firstName + " " + employees[i].lastName+" ";

                }
                
                out=out+"</table></body></html>";

                document.write(out);


                
            }
        });
        }); 
});







</script>




</head>


<body>

<br>
<br>
<div class="init">
<h1 align="center">SELECT TO SCAN</h1>
<table>
    <col width="400">
    <col width="800">
    <col width="800">
    
    <tr>
        <td></td>
        <td>
<button style="width: 40%" id="hostdiv">Host Scan</button>
</td>
    <td>
<button style="width: 40%" id="portdiv">Port Scan</button>
    </td>
</tr>
</table>

<br>
<br>
<br>
<br>
<table align="center">



    <tr>
        <td></td>
        <td>

ENTER DATE:    <input type="date" id="tp">
</td></tr></table>
<br><br>
<table align="center">
<tr><td>

       <button id="Result">All Results</button>
</td></tr>
</table>
</div>
<br>
<br>
<div id="tablee2" class="tablee2">
<div id="dvTable" class="tab"></div>
<br><br><br>
<div style="position: absolute;left: 1000px;" id='more_result' class='more_result'>
<form action='http://127.0.0.1:8070'>
<input type='submit' value='Go to home page'>
</form>
</div>
<div style="position: absolute;left: 200px;" id='go_back' class='go_back'>
<button align='right' id='table32' >More Results</button>
</div>

</div>
<!--
<div id="more_result" class="more_result">
<form action="http://127.0.0.1:8070">
    <input type="submit" value="Go to home page">
</form>

</div>

<div id="go_back" class="go_back">
<button id="table32" >More Results</button>

</div>
-->
<div class="host">
    <hr>
    <h3 align="center">Enter the details:</h3><br>
    <form name="form1" action="/hosts" onsubmit="return myFunct(document.form1.IP.value)" method="post">
    <table>
    <col width="550">

   <tr>

       <td></td>
<td>

        <label for="IP">IP Address:</label>

        <input type="text" name="IP" id="IP">
</td>
       </tr>

</table>
<br><br>
<input type=hidden id="Multi-Host" value="false" name="Multi-Host" />
<input type=hidden id="subnet" value="false" name="subnet" />
        <!--<table>
            <col width="600">

            <tr>
                <td></td><td>
		<a href="a.html">To Scan range of Ports</a>-->
		<!--<button onclick="a.html">Range</button>-->
                <!--<input type="radio" id="hostr">Range<br>-->
                <!--<style="width: 200%" id="hostr">Range of IP</>-->
           <!-- </td></tr>


        </table>-->
        <br><br>
       <!-- <div class="hostrange">
            <table>
                <col width="550">

                <tr>

                    <td></td>
                    <td>

                        <label for="iprange">Enter Range:</label>

                        <input type="text" name="text2" id="iprange">
                    </td>
                </tr>

            </table>

        </div>-->
        <br><br>
        <table>
            <col width="620">
            <col width="620">
            <tr>
                <td></td>
                <td>
                    <INPUT TYPE=CHECKBOX NAME="random"> Random

                <td>
            </tr>
            <tr>
                <td>

		
		</td>
                <td>

    <input type="submit" name="submit" value="Submit" />
            </td></tr></table>

    </form>

</div>










<div class="port">
    <hr>
    <h3 align="center">Enter the details:</h3><br>

    <form name="form2" action="/ports" onsubmit="return myFunction(document.form2.IP.value)" method="post" >
        <table>
            <col width="300">
            <col width="400">

            <col width="50">
            <col width="400">

            <tr>
                <td></td>
                <td>
                    <label for="IPp">IP Address:</label>

                    <input type="text" name="IP" id="IP">
                </td>
                <td></td>
                <td>
                    <label for="range">Start:</label>
			<input type="text" name="start" id="start">
			<br>
			<label for="end">End :</label>
                    <input type="text" name="end" id="end">
                </td> </tr>

        </table> <br><br>
<table>
    <col width="600">
    <col width="600">
	
    <tr><td>
	</td>
 <td>

<select id="typeofscanning" name="typeofscanning">
  <option value="2">Normal Port Scanning</option>
  <option value="1">TCP SYN</option>
  <option value="3">TCP FIN</option>
  
</select>
</td>
</tr></table>
<br><br><br><br>
<table>
    <col width="600">
    <col width="600">
	
    <tr>
 <td>
 </td>
	
       
        <td>
        <INPUT TYPE=CHECKBOX NAME="random"> Random

        <td>
        </tr>
    <tr></tr>
    <tr>
        <td>


</td>
        <td>

            <input class="cen" type="submit" name="submit" value="Submit"/>
</td>
</tr>
</table>
    </form>

</div>

</body>
</html>
